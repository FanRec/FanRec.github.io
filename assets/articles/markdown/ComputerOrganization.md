## 第一章

#### 计算机系统的组成

##### 硬件

##### 软件

- 系统软件
- 应用软件:操作系统，数据库管理系统，服务程序，语言处理程序，网络软件，标准程序库。

#### 计算机系统的层次结构

高级语言机器(虚拟机器 M4)——用编译程序翻译成汇编语言程序

汇编语言机器(虚拟机器 M3)——用汇编程序翻译成机器语言程序

操作系统机器(虚拟机器 M2)——用机器语言解释操作系统

机器语言机器(传统机器 M1)——用微程序解释机器指令

微指令系统(微程序机器 M1)——由硬件直接执行微指令

#### 计算机体系结构和计算机组成的区别

计算机体系结构：指能够被程序员所见到的计算机系统的属性。包括指令集、数据类型、存储器寻址技术、I/O 机理等

计算机组成：指如何实现计算机体系结构所体现的属性。包含了许多对程序员来说透明的硬件细节。

#### 冯诺依曼计算机的特点

- 计算机由运算器、控制器、存储器、输入设备、输出设备组成
- 指令和数据以同等地位存放于存储器内，并可按地址访存
- 指令和数据均用二进制数表示
- 指令由操作码和地址码组成
- 指令在存储器中按顺序存放
- 以运算器为中心

#### 冯诺依曼机的驱动方式（控制流）

#### 系统复杂性管理的方法

- 抽象:隐藏系统中不重要的细节
- 层次化:将被设计的系统划分为多个模块或子模块
- 模块化:有明确的功能和接口
- 规则性:模块更容易被重用

#### 计算 ax 方+bx+c 的程序清单

#### MAR?MDR?

MAR:存储器地址寄存器 反映了存储单元的个数

MDR:存储器数据寄存器 反映了存储字长

#### 存储体？存储单元？存储元件？存储字？存储字长？

存储字：存储单元存储的一串二进制代码

存储字长：这串二进制代码的位数

存储体：由许多存储单元构成

存储单元：包含若干存储元件，可存储一串二进制代码

存储元件：能寄存一位二进制代码

#### 主存的存取方式（按地址存取）

#### 各寄存器（ACC,MQ,X）存放的各类操作数

|     | 加法       | 减法       | 乘法           | 除法         |
| --- | ---------- | ---------- | -------------- | ------------ |
| ACC | 被加数及和 | 被减数及差 | 乘积高位       | 被除数及余数 |
| MQ  |            |            | 乘数及乘积低位 | 商           |
| X   | 加数       | 减数       | 被乘数         | 除数         |

#### 完成一条指令的过程（取指令 PC，分析指令 IR，执行指令 CU）

#### 指令执行过程的描述

加操作的执行过程：根据 PC 中的地址放到 MAR，到存储器 M 中找到指令放入 MDR，由 MDR 送入 IR，分出操作码和地址码，操作码放入 CU，地址码放入 MAR，到存储器 M 中找数放入 MDR，由 MDR 放入 ACC。

#### 机器字长（简称字长），存储容量，字，指令字长

机器字长:CPU 一次能处理数据的位数，与 CPU 的寄存器的位数有关，影响运算速度。

存储容量=存储单元的个数 X 存储字长

指令字长:一个指令中包含的二进制代码的位数

#### 数据通路带宽

#### 吞吐量（概念，主要取决于？），响应时间

#### CPU 时钟周期，主频（CPU 时钟频率）

#### 吉普森法

$$
T_{\text{M}} = \sum_{i=1}^{n}{f_i}{t_i}
$$

TM 机器运行速度，fi 第 i 种指令占全部操作的百分比数，ti 第 i 种指令的执行时间

#### MIPS=主频/(CPI\*1000000)

MIPS 百万条指令每秒

CPI 执行一条指令所需要的时钟周期

#### CPI，IPS

CPI = (执行时间 X 主频)/指令数 = 总时钟周期数/指令数

#### CPU 执行时间=

#### FLOPS？

浮点运算次数每秒

#### 基准程序，系列机，兼容，固件

基准程序：用来进行性能评价的一组程序，在不同机器上运行相同的基准程序比较不同机器的运行时间，从而评测其性能。

系列机：具有基本相同的体系结构，使用相同基本指令系统的多个不同型号的计算机组成一个产品系列

兼容：软件或硬件的通用性。运行在某个型号计算机系统中的硬/软件也能应用与另一个型号的计算机系统

固件：将程序固化在 ROM 中组成的部件

#### 计算机性能指标

吞吐量、响应时间、CPU 时钟周期、主频、CPI、CPU 执行时间、MIPS、FLOPS

#### 摩尔定律

#### 什么叫做软/硬件在逻辑功能上是等价（效）的

对于某个功能来说，既可以用软件实现，又可以用硬件实现

#### 存储器分为（主存储器 辅存储器）

#### 运算器包含什么（ACC,MQ,X,IX,BR,PSW）

#### 三个级别的语言的特点

编译程序和汇编程序的区别：编译程序 源语言是高级语言，目标语言是汇编语言或机器语言。汇编程序 源语言是汇编语言，目标语言是机器语言

机器语言：二进制代码语言，计算机唯一可以识别和执行的语言

汇编语言：用英文单词或其缩写代替二进制的指令代码

高级语言：

#### 裸机

没有配备软件的纯硬件系统

#### 指令集体系结构 ISA

软件和硬件之间的界面是 ISA，ISA 定义了一台计算机可以执行的所有指令的集合。软件可见部分。

#### 翻译过程

预处理阶段、编译阶段、汇编阶段、链接阶段

#### 用于科学计算的计算机中，标志系统性能的最有用的参数是？

FLOPS

#### CPU 的寄存器中?对用户是完全透明

IR MAR MDR

#### 从用户观点看，评价计算机系统性能的综合参数?

吞吐率

#### 当前设计高性能计算机的重要技术途径?

采用并行处理技术

## 第三章

### I/O 接口存在的原因？

- 设备选择
- 速度匹配
- 电平转换
- 串并转换
- 控制命令传输
- 状态报告与查询

### 总线的分类（按连接部件分（片内 系统 通信）按时序控制方式分类（同步 异步）按数据传输方式分（串行 并行））

##### 按连接部件分类

片内总线:芯片内部的总线。如在 CPU 内部，寄存器与寄存器之间，寄存器与 ALU 之间都由片内总线连接。

系统总线:CPU、主存、I/O 设备各大部件之间的信息传输线。

通讯总线:计算机系统之间、计算机系统与其他系统之间通信。按传输方式可以分为 串行通信 和 并行通信

##### 按时序控制分类

同步总线:数据与时钟同步工作的总线

异步总线:数据与时钟不同步的总线

##### 按数据传输方式分类

串行总线

并行总线

### 系统总线按传输信息类型的不同分为（数据总线，地址总线，控制总线）

##### 数据总线

传输各功能部件之间的数据信息

双线传输总线，位数与机器字长、存储字长有关

##### 地址总线

用来指出数据总线上源数据或目的数据在主存单元的地址或 I/O 设备的地址

单向传输，与存储地址、I/O 地址有关

##### 控制总线

单根单向，双根双向、

常见的控制信号：

​ 时钟、复位、总线请求、总线允许、中断请求、中断响应、存储器读、存储器写、I/O 读、I/O 写、传输响应

​ 输出信号：存储器读、存储器写、总线允许、中断响应

​ 输入信号：中断请求、总线请求

### 总线的特征?

##### 机械特性

总线在机械连接方式上的一些性能。

几何尺寸、形状、引脚的个数以及排列的顺序、接头处的可靠程度。

##### 电气特性

信号的传递方向、有效的电平范围

##### 功能特性

指总线中每根传输线的功能

地址总线用来指出地址码，数据总线用来传递数据、控制总线发出控制信号

##### 时间特性

指总线中的任一根线在什么时间内有效

各种信号相互存在一种有效时序关系

### 总线宽度、总线带宽、时钟同步/异步、总线复用、信号线数、总线控制方式

总线宽度:数据总线的根数

总线带宽（每秒传输的字节数）=工作频率 x 总线宽度

时钟同步/异步:数据与时钟同步工作的总线叫同步总线，数据与时钟不同步的总线叫异步总线

总线复用：一条信号线上分时传送两种信号（地址总线和数据总线）

总线控制方式：突发工作、自动配置、仲裁方式、逻辑方式、计数方式

### 其他指标（负载能力，电源电压，总线宽度能否扩展）

### 总线标准

系统与各模块、模块与模块之间的一个互连的标准界面。

### 总线结构（单总线，多总线）

##### 单总线结构

优点:结构简单、成本低、易于接入新的设备

缺点：带宽低、负载重、多个部件只能争用唯一的总线、不支持并发传送操作（系统瓶颈、多设备控制复杂、多设备控制信号传输延迟）

##### 双总线结构

主存总线、I/O 总线

通道：是一个具有特殊功能的处理器，对 I/O 设备具有统一管理功能，具有 CPU 部分功能，无法独立工作

优点：将速度较低的 IO 设备从单总线上分离出来，实现了存储器总线和 I/O 总线的分离

缺点：需要增加通道等硬件设备

##### 三总线结构

主存总线、I/O 总线、DMA 总线

DMA 总线:用于在内存和高速外设之间直接传送数据

优点：提高了 I/O 设备的性能，使其更快地响应命令、提高系统吞吐量。

缺点：任意时刻只能使用一种总线，系统工作效率低。

### 主设备、从设备

主设备：对总线有控制权

总设备：只能相应从主设备发来的总线命令

### 总线判优控制分类

#### 集中式

##### 链式查询:

​ BS 总线忙，BR 总线请求、BG 总线查询

​ 总线同意信号串行的从一个 I/O 接口送到下一个 I/O 接口，如果 BG 到达的接口有总线请求，BG 信号就不再往下传，该接口获得总线控制权，建立总线忙 BS 信号，表示占用了总线。

​ 优点：1.只需要用很少几根线就能按一定优先次序实现总线控制，2.易扩充设备

​ 缺点：1.对电路故障敏感，2.优先级固定，灵活性差

##### 计数器定时查询:

​ 特点：

​ 1.计数可以从“0”开始，此时一旦设备的优先次序被固定，设备的优先级就按 0,1,...,n 的顺序降序排列，而且固定不变

​ 2.计数可以从上一次计数的终点开始，是一种循环的方法，此时设备使用总线的优先级相等

​ 3.计数的初始值可以由程序设置，优先次序可以改变

​ 4.优点：对电路故障不如链式查询敏感

​ 缺点：增加了控制线、控制复杂。

##### 独立请求方式:

​ 每一台设备都有一对总线请求线 BR 和总线同意线 BG。总线控制部件中有一排队电路。

​ 优点：响应控制快，优先次序控制灵活

​ 缺点：控制线数量多，总线控制复杂

##### 所用线数

​ 链式查询：2 根。计数器查询：log2 n。独立请求：2n

#### 分布式

### 分时，共享

### 总线周期？4 个阶段？

- 申请分配阶段
- 寻址阶段
- 传数阶段
- 结束阶段

### 同步通信，异步通信，半同步通信，分离式通信。

#### 同步通信：

双方由**统一时标**控制数据传送称为同步通信

数据输入传输：地址、读命令、数据

数据输出传输：地址、数据、写命令

读命令传输周期：T1 主模块发地址 T2 主模块发读命令 T3 从模块提供数据 T4 主模块撤销读命令，从模块撤销数据

写命令传输周期：T1 主模块发地址 T2 主模块提供数据 T3 主模块发写命令，从模块接收到命令后在规定时间内将数据总线上的数据写到地址总线所指明的单元中 T4 主模块撤销写命令和数据等信号

#### 异步通信：

没有公共的时钟标准。允许各模块速度不一致性。

采用应答方式

应答方式：解决请求和回答何时撤回的问题

- 不互锁:
- 半互锁:
- 全互锁:

波特率：单位时间内传输二进制数据的位数。异步串行通信的数据传送速率用波特率衡量。单位 bps(位/秒)，记作波特

比特率：单位时间内传输二进制数据的位数。异步串行通信的数据传输速率用波特率衡量。单位 bps

#### 半同步通信：

同步：发送方用系统时钟的某个前沿时刻发信号，接收方用系统时钟后沿时刻进行判断识别。

异步：允许不同速度的模块和谐工作，增加了等待-WAIT 响应信号

适用：适用于系统工作效率不高，但又包含了许多工作速度差异较大的各类设备组成的简单系统。

优点：控制方式比异步通信简单，统一的系统时钟控制下同步工作，可靠性高，同步结构方便。

缺点：对系统频率不能要求太高，整体上看，系统工作速度不是很高。

#### 分离式通信：

充分挖掘系统总线的每瞬间潜力

基本思想：将一个传输周期分成两个子周期。第一个子周期中，模块 A 获得总线使用权后将命令、地址以及其他相关信息，包括该主模块编号发到系统总线上，一旦发送完立即放弃总线控制权以便其他模块使用。B 模块收到 A 发来相关命令信号后将 A 所需数据准备好，便由 B 申请总线使用权，将 A 的编号，B 的地址，A 所需数据等送到总线上，供 A 接受。

特点：

1. 各模块欲占用总线使用权都必须提出申请
2. 得到总线使用权后，主模块在限定的时间内向对方传送消息，采用同步方式传送，不再等待对方回答信号。
3. 各模块在准备数据时都不占用总线，使总线可接受其他模块的请求。
4. 总线被占用时都在做有效工作 ，不存在等待时间。

优点：充分利用了总线的有效占用

缺点：控制方式复杂

### 总线时钟周期，总线时钟频率，总线传输周期总线工作频率

### 总线性能指标（总线宽度，总线工作频率，总线带宽）

### 总线事务（请求操作，仲裁操作，地址传输，数据传输，总线释放）

### 总线上数据传送方式分为（非突发式方式，突发方式）

### 异步串行通讯方式特点

收发方时钟不严格一致

每个字符都要用开始位和停止位作为字符开始和结束的标志

开始位 数据 奇偶校验位 停止位

### 串行总线比并行总线快的原因（时间漂移，相互干扰）

### 采用总线结构的好处

### 同步通信是如何保正同步的

## 第四章

#### 存储器的分类?

##### 按存储介质分:

- 半导体存储器:优点:体积小、功耗低、存取时间短。缺电：易失性。

  ​ 按材料不同分为: 双极型(TTL)(高速) 和 MOS(集成度高，成本低廉，功耗小)

- 磁表面存储器: 非破坏性读出，不需要再生

- 磁芯存储器

- 光盘存储器

##### 按存储方式分类:

(存取时间和物理地址无关 随机访问)

- 随机存储器 RAM:分为 静态 RAM(触发器原理寄存信息) 和 动态 RAM(电容充放电原理寄存信息 需刷新)
- 只读存储器 ROM:能对其存储内容读出，而不能对其重新写入的存储器。ROM 的读出速度比写入速度快得多。 MROM、PROM、EPROM、EEPROM

(存取时间和物理地址有关)

- 串行访问存储器:对存储单元进行读/写操作时，需按其物理位置的先后顺序寻找地址。

  ​ 分为：顺序存取存储器 和 直接存取存储器

#### 存储器 3 个主要性能指标（速度，容量，位价）

#### 局部性原理

- 时间局部性:被引用过一次的存储单元，很可能在不远的将来再次多次被引用
- 空间局部性:一个存储单元被引用了一次，在不远的将来其周围的存储单元也可能被引用

#### 哈佛结构

将 cahe 组织成单独的指令 cache 和数据 cache，可有效解决指令和数据并行访存冲突。

#### 主存和缓存交换的单位（块），辅存与主存交换的单位（段，页）

#### 缓存-主存层次解决的问题，主存-辅存层次解决的问题？数据调度各自由什么完成？对程序员透明吗？

- 缓存-主存层次:主要解决 CPU 与主存速度不匹配的问题。数据调动由硬件自动完成，对程序员透明。
- 主存-辅存层次:主要解决存储系统的容量问题。 数据调动由硬件和操作系统共同完成，对应用程序设计者透明，对系统程序设计者不透明。

#### 虚拟存储系统的特点？逻辑地址和虚拟地址是怎么变换的？由谁完成的？透明？

程序员编程的地址范围和虚拟存储器的地址空间相对应。

##### 虚拟存储系统的特点:

虚拟扩充，部分装入，离散分配，多次对换。

- 虚拟扩充： 不是物理上而是逻辑上扩充了内存容量。
- 部分装入： 每个作业不是全部一次性地装入内存，而是只装入一部分。
- 离散分配：不必占用连续的内存空间，而是“见缝插针” 。
- 多次对换：所需的全部程序和数据要分成多次调入内存。

##### 逻辑地址和虚拟地址的变换:

1. 逻辑地址分解成组号 a 和组内地址 b，对组号 a 地址变换(即将逻辑组号 a 作为索引查地址变换表，确定该组信息是否存放在主存内)
2. 若该组号已在主存内则转而执行 4，若组号不在主存中，检查主存中是否有空闲区，如果没有便将某个暂时不用的组调出送往辅存，以便将这组信息调入主存
3. 从辅存中读出所要的组，并送到主存空闲区，然后将这个空闲的物理组号 a 和逻辑组号 a 登录在的地址变换表中。
4. 从地址变换表中读出与逻辑组号 a 对应的物理组号 a。
5. 从物理组号 a 和组内字节字节地址 b 得到物理地址
6. 根据物理地址从主存中存取必要的信息

由逻辑地址变换为物理地址的工作是由计算机系统的硬件和操作系统自动完成的，对程序员是透明的。

#### 译码器作用（片选信号生成）驱动器的作用（放大控制信号）读写电路（读出时需要放大器）

#### 按字编址，按字节编址？字地址（该字高位/低位字节地址）？大端模式，小端模式？（大端好还是小端好？各有各的好）寻址范围（数字范围）？寻址空间（寻址的最大容量）？

字地址:IBM370(用的大端模式)字地址用该字高位字节的地址来表示。PDP-11(小端模式字地址)字地址用该字低位字节地址表示

大端模式:高字节保存在内存低地址中（高尾)。(符号位判定固定为第一个字节，易判正负)

小端模式:高字节保存在内存高的地址中(低尾)。(强制转换数据不需要调整字节内容)

寻址范围:仅仅是个数字范围，无单位(例如 0~2^20-1)

寻址空间:一般指 CPU 对于内存寻址的能力，即寻址的最大容量。单位一般用 MB、B 等表示

#### 主存的主要技术指标（存储容量，存储速度）

#### 存储容量？存储速度（存取时间，存取周期）？存储器带宽？

存储容量:指能存放二进制代码的总位数。存储容量=存储单元的个数 X 存储字长

存储速度：由存储时间和存储周期表示

存取时间:指启动一次存储器操作(读或写)到完成该操作所需的全部时间。(分为读出时间（从收到有效地址开始到产生有效输出所需的全部时间）和写入时间（从收到有效地址到数据写入被选中单元所需的全部时间）)

存取周期：指存储器进行连续两次独立的存储器操作所需要的最小时间间隔

存储器带宽：表示单位时间内存储器存取的信息量(字/秒、字节/秒 或 位/秒)

#### 提高存储器带宽的方法？

- 缩短存取周期
- 增加存储字长
- 增加存储器

#### 地址线，数据线，片选线，读/写控制线。

地址线:单向输入

数据线:双向的，位数与芯片容量有关

地址线和数据线的位数共同反应存储芯片的容量

控制线:有读写控制线(决定芯片进行读写操作) 和 片选线(选择存储芯片) 两种

#### 半导体存储芯片的译码驱动方式（线选法和重合法）

##### 线选法：

特点：用一根选择线选中一个存储单元的各位

优点：地址码只需要进行一次译码就可以选择存储单元

缺点：地址码位数越长，译码器结构越复杂，成本越高

适用于：速度较快，容量较小的存储芯片

##### 重合法

特点:被选单元是由 X、Y 两个方向的地址决定的

优点：大大简化了外部译码线路

缺点：增加了一个译码器

适用于：用于大容量的存储器结构

#### 静态 RAM 基本单元电路，优缺点

（存取速度快，集成度低，功耗大，价格昂贵）

#### 静态 RAM 读周期时序，写周期时序\*

读周期时序:地址、片选、输出数据 D out

写周期时序:地址、片选、写信号、输出数据 D out、写入数据 D in

#### 动态 RAM 基本单元电路，优缺点

（存取速度比 SRAM 慢，集成度高，功耗小，位价低）

#### 地址复用（行缓冲寄存器，列缓冲寄存器）

应有 14 根地址线，单位了减少芯片封装的引脚数，地址线只有 7 根，地址信息分两次传送，先送 7 位行地址保存到芯片内的行地址缓冲寄存器，再送 7 位列地址保存到芯片内的列地址缓冲寄存器。

芯片内有时序电路，受行地址选通-RAS、列地址选通-CAS 以及写允许信号-WE 控制。

#### 读写反相问题

放大器：左右两边电平相反。

写入读放大器左侧行的信息与输入信息是相反的，读出读放大器左侧行信息与输出信息相反，最终结果正确（解决读反向的方式就是写反向）

#### 动态 RAM 的时序，读写时序图。

读时序:1.行缓冲寄存器-RAS，2.写信号失效-WE 3.行缓冲寄存器-CAS 4.输出数据 D out

写时序:1.行缓冲寄存器-RAS, 2.写信号有效-WE 3.输入数据 D in 4.行缓冲寄存器-CAS

#### 刷新周期？(一般取 2ms）逐行刷新

#### 刷新的三种方式（集中刷新，分散刷新，异步刷新）特点？是否有“死区”？

刷新:现将原存信息读出，再由刷新放大器形成原信息并重新写入的再生过程。

- 集中刷新:在一个刷新周期内，对全部存储单元集中一段时间逐行进行刷新，此刻必须停止读/写操作，“死时间”又称“死区”。

- 分散刷新:对每行存储单元的刷新分散到每个存取周期内完成。把存取周期 tc 分为两段，前半段 tM 用来读/写或维持信息，后半段 tR 用来刷新，即 tc = tM + tR。不存在“死时间”，但存取周期长了，整个系统速度降低了。

  异步刷新:两种方式的结合，既缩短了死时间，又充分利用最大刷新间隔为 2ms 的特点。

#### DRAM 刷新需要注意哪些问题?

(刷新对 cpu 来说是透明的，不依赖外部的访问。刷新单位是行，由芯片内部自行生成行地址。)

#### 刷新周期中输入至存储器件的地址由谁提供?

（由一个计数方式工作的寄存器提供 只有行地址）

#### 刷新周期中每块存储芯片的刷新是（同时进行的）

#### 存储器刷新周期中存储器模块中各芯片的数据输出呈（高阻抗），即（片内数据线与外部数据线完全隔离）

#### 如果将动态 RAM 刷新安排在 CPU 对指令的译码阶段的优缺点。

此时刷新操作对 CPU 是透明的，称透明刷新。

没有单独占用 CPU 的时间，没有“死时间”，效率最高，但刷新的控制线路较为复杂。

#### 动态 RAM 与静态 RAM 的比较

|          | DRAM | SRAM   |
| -------- | ---- | ------ |
| 存储原理 | 电容 | 触发器 |
| 集成度   | 高   | 低     |
| 引脚数量 | 少   | 多     |
| 功耗     | 小   | 大     |
| 价格     | 低   | 高     |
| 速度     | 慢   | 快     |
| 刷新     | 有   | 无     |

#### EPROM 的引脚（Vcc,Vpp,Vss,CS 非,PD 非/Progr）?PD 非/Progr?

2716 型 EPROM 的引脚图

电源引出头：Vcc 和 Vpp。Vcc 接+5V，Vpp 平时接+5V，接+25V 用来完成编程。

地：Vss

片选端：-CS，高读低写。

功率下降/编程输入端：-PD/Progr，在读出时为低电平，为高电平时可使 EPROM 功率由 525mW 降至 132mW。

#### EPROM 改写的两种方式

紫外线照射(不能对个别单元单独擦除改写)

电气方法擦除（EEPROM）

#### 74LS138 译码器，G1,G2A 非,G2B 非置多少时工作，置多少时禁用。

G1 = 1，-G2A + -G2B = 0 时工作，除此之外都禁用

#### 位扩展，字扩展

位扩展：增加存储字长

字扩展：增加存储字的数量

#### 存储器与 CPU 的连接

##### 地址线的连接

CPU 地址线数比存储芯片地址线数多。

通常总是将 CPU 地址线的低位与存储芯片的地址线相连。CPU 地址线的高位或在存储芯片扩充时使用，或用作其他用途，如片选信号等

##### 数据线的连接

CPU 的数据线数与存储芯片的数据线数不一定相等，此时必须对存储芯片扩位使其数据位数与 CPU 数据线数相等

##### 读/写命令线的连接

读/写命令线一般可直接与存储芯片的读/写控制线相连，高读低写

##### 片段线的连接

片选线的连接是 CPU 与存储芯片正确工作的关键

要求 CPU 引脚线不能悬空， 采用全地址译码。 CPU 引脚要全部使用，CPU 引脚全部使用后，片选逻辑生成电路或译码器的输入端和控制端信号仍然无对应线接入，则...低电平有效可接地，高电平有效可接外接电压

片选有效信号与 CPU 的访存控制信号-MREQ 有关，若 CPU 访问 I/O 则-MREQ 为高电平，表示不要求存储器工作。

##### 合理选择存储芯片

通常用 ROM 存系统程序，标准子程序和各类常数。

RAM 是为用户编程而设置的

还会遇到 CPU 与存储芯片时序的配合，速度，负载匹配等问题。

#### 误码率 BER？热噪声？冲击噪声？随机差错？突发差错？冗余信息机制？

误码率 BER：一段时间内传输错误的比特数占所传输比特总数大的比率。（Bit Error Rate)

热噪声：电子热运动造成的，时刻存在，幅度小，频谱宽，强度与频率无关

冲击噪声：外接电磁干扰引起的，突发性，幅度大，强度与频率有关

随机差错：由热噪声引起的差错

突发差错：由冲击噪声引起的差错

通信过程中产生的差错是由随机差错和突发差错共同构成的

冗余信息机制：在传送的数据之上增加冗余信息的方法，使接收方可以根据冗余信息来检测或纠正错误

#### 奇偶校验？

水平，垂直，水平垂直奇偶校验，带分组的奇偶校验

#### 汉明码是什么?

汉明码是一种具有纠错能力的编码，实质上算是使用特殊分组方式的奇偶校验。（分组：非划分方式）(采用奇偶校验、分组校验)

#### 编码的检错能力和纠错能力和什么有关呢？

编码的最小距离：任意两组合法代码之间二进制位的最少差异数

$$
L-1=D+C\ 且D\geq C
$$

L:最小编码距离，D：检测错误的位数，C：纠正错误的位数，且纠错能力小于或等于检错能力

#### 组成汉明码的三要素？

##### 要素 1：汉明码的组成需要增添？位检测位。

$$
{2^k}\geq {n+k+1}
$$

##### 要素 2：检测位的位置。

$$
{2^i}\ (i = 0,1,2,3,...)
$$

##### 要素 3：检测位的取值。

与该位所在的检测“小组”中承担的奇偶校验任务有关。

配偶原则：偶校验。配奇原则：奇校验。

配奇(偶)原则：“1”的个数成为奇数(或偶数)

#### 7 位汉明码的小组划分

g1 小组：1，3，5，7

g2 小组：2，4，6，7

g3 小组：4，5，6，7

#### 汉明码纠两位错

需再添加一位检测位

#### 循环冗余校验码冗余码的计算过程\*

#### 纠错依据?

余数与出错位的对印关系是不变的，只与码制和生成多项式有关

#### CRC 差错检测技术只能做到无差错接受

无差别接受：凡是接受信息，都能以非常接近“1”的概率认为这些信息在存储或传输过程中没有产生差错

#### CRC 校验码的检错能力？

CRC 校验码能检查出：

- 全部单个错
- 全部离散的二位错
- 全部奇数个错
- 全部长度小于或等于 K 位的突发错,K 为生成多项式阶数

CRC 校验码能以

$$
[1-(\frac{1}{2})^{k-1}]
$$

的概率检查出长度为 (K+1) 位的突发错

#### 提高访存速度的方法

- 采用高速元件
- 采用层次结构
- 调整主存结构

#### 单体多字系统

增加了存储字长

##### 优点：

增加了存储器带宽，提高了单体存储器的工作速度

##### 并行访问存储器的缺点？

访问主存的冲突大。表现：

- 取指令冲突:
- 读操作数冲突:
- 写数据冲突:
- 读写冲突:

##### 采用这种方法的前提

指令和数据在主存内必须是连续存放的

##### 多个并行工作地点存储器

共有一套地址寄存器和译码电路，按统一地址并行的访问各自的对应单元

#### 多体并行系统

每个模块有相同的容量和存取速度，各模块各自都有独立的地址寄存器 MAR、数据寄存器 MDR、地址译码、驱动电路、读/写电路，他们能并行工作又能交叉工作

##### 高位交叉编址（存储器容量的扩展）

并行工作即同时访问 N 个模块，同时启动，同时读出，完全并行的工作（同时读出的字在总线上需分时传送）

按体内地址顺序存放，高位地址表示体号，低位地址为体内地址。

优点:体内的地址是连续的，有利于存储器的扩充

##### 低位交叉编址（存储器带宽的提升）

程序连续存放在相邻体中(交叉存储)，低位地址为体号，高位地址为体内地址（模 M 编址，横向编址）。

优点:不改变每个模块存取周期的前提下，提高存储器的带宽

采用流水线方式存取时，应满足 T = nτ（要求低位交叉存储器模块数大于或等于 n）（存取周期 T，总线传输周期 τ)

#### 低位，高位交叉编址连续读取 n 个字所需要的时间 t

低位交叉：t1 = T + (n - 1)τ

高位交叉：t2 = nT

#### 存控。（排队器，存控标记触发器，节拍发生器，控制线路）\*

1.
2.
3.

排队器：确定请求源优先级别

1. 对易发生代码缺失的请求源，应列为最高优先级，如外设信息最易丢失，级别最高。
2. 对严重影响 CPU 工作的请求源，基于次高优先级，如写数请求高于读数，读数请求高于读指令。

存控标记触发器 CM：接受排队器的输出信号，一旦响应某请求源的请求，CM 被置“1”，以便启动节拍发生器工作

节拍发生器：产生固定节拍，与机器总脉冲同步，使控制线路按一定时序发出信号

控制线路：

#### 为什么要有缓存？

- 避免 cpu“空等”现象
- cpu 和主存速度差异
- 程序访问的局部性原理

#### CPU 欲读取主存某字时的两种可能

1 所需字已在 cache 中（缓存命中），即可直接访问 Cache

2 所需字不在 cache 内（缓存不命中），此时需要将该字所在的主存整个字块一次调入 Cache 中

#### 什么叫主存块与缓存块建立了对应关系

如果主存块已调入缓冲块，则称...

#### 为什么需要标记？怎么判断所读信息是否已在缓存中？

缓存的块数 C 远小于主存的块数 M，一个缓存块不能唯一地、永久的只对应一个主存块，所以需要标记。

CPU 读信息时，要将主存地址的高 m 位与缓冲块标记进行比较

#### 命中率 h，平均访问时间 ta，访问效率 e。

Nc 访问 cache 的总命中次数，Nm 访问主存的总次数，tc 命中时的 cache 访问时间，tm 未命中时主存访问时间

$$
命中率\ h\\
{h = \frac {N_c}{N_c+N_m}}\\
平均访问时间{t_a}\\
{ta = {h}{t_c}+{(1-h)}{t_m}}\\
访问效率\\
{e=\frac{t_c}{t_a}*100\% = \frac{t_c}{{h}{t_c}+{(1-h)}{t_m}}*100\%}
$$

#### 块长与命中率的关系

取决于程序的局部特性。

当块由小到大增长时，起初会因局部性原理使命中率有所提高。增大块长，可以让更多有用字存入缓存，提高其命中率。

继续增大块长，命中率可能下降，因为所装入缓存的有用数据反而少于被替换掉的有用数据。

#### cache 存储体与主存交换信息的单位

块

#### 地址映射变换机的功能

将 CPU 送来的主存地址转换为 Cache 地址

#### Cache 对用户是透明的

#### 写分配和写不分配？

根据**写缺失时**是否把数据写回 cache 分的

写分配：写缺失情况下，同时将数据写入 Cache 和内存中

写不分配：写缺失情况下，CPU 直接将数据写入到主存中

#### 写直达通常结合写不分配，写回法通常结合写分配。

写直达通常结合写不分配：写缺失时，直接写入主存而不写入 Cache。

写回法通常结合写分配：写缺失时，只写入 Cache 不写入内存。

#### 写直达法，写回法？对比（时间上）？

#### 对于有多个处理器的系统各自有独立的 cache 且都共享主存当一个缓存数据被修改时...(主存中和其他缓存中相应字无效)

#### cache 改进的两方面（1 增加 cache 的级数 2 将统一的 cache 变成分立的 cache）

#### 单一缓存（片内缓存 为什么可以提高外部总线的利用率？）

#### 片外缓存（静态 ram 组成，使用一个独立的数据路径（优点？））

#### 两级缓存（片内为第一级，片外为第二级）

#### 统一缓存（指令和数据在同一缓存内的 cache）分立缓存（指令 cache，数据 cache）

#### 两种缓存的选用（考虑两个因素（1 主存结构...2 机器对指令执行的控制方式）），超前控制？流水线控制？

#### 地址映射（直接映射，全相联映射，组相联映射）

#### 直接映射 是什么？优缺点？主存地址高 m 位分成低 c 位（cache 的字块地址）和高 t 位（主存字块标记）。有效位。如何判断 cache 命不命中？

#### 是否会出现主存块标记和 cache 块标记相同但却不是要找的主存块？

#### 主存中是否存在相同主存块标记的块？

#### 如果 Q2 是肯定的，那么相同的主存块标记的主存块会映射到同一 cache？

#### 全相联映射是什么？ 优缺点？相联寄存器（采用内容寻址。检索寄存器 CR，屏蔽寄存器 RR，字选择寄存器 WSR，代码寄存器。每次查找是将所有存储字的相关字段与检索项同时进行比较。可以进行各种比较）？主存字块标记 m=t+c 位 字块内地址 b 位。

#### 组相联映射是什么？分为 Q 组，每组 R 块。主存字块标记 s=t+r 位 组地址 q=c-r 位 字块内地址 b 位，m 位=s+q。

#### 块冲突概率由高到低顺序，发生冲突的最小块数。

#### 靠近 cpu 的用？中间层次用？距离 cpu 较远的用？

## 第五章

#### 早期的 I/O 设备的特点

- 线路十分散乱、庞杂
- I/O 设备与 CPU 是按串行方式工作的，极浪费时间
- 增添、撤减、更换 I/O 设备是非常困难的

#### 接口中设有（数据通路，控制通路）（经过接口起缓冲作用和完成串并转换） 优点？不是完全的并行。p156

#### 直接存储器存取（DMA）的特点？适用？（小型和微型计算机） 缺点？

#### 通道是什么？优点缺点？数据传送的单位？什么时候会发出中断信息？（数据块读写后）p157

#### I/O 处理机(外围处理机)（IO 控制，码制变换，格式处理， 数据块检错，纠错）

#### I/O 软件的主要任务？

#### I/O 指令的组成？（操作码？（IO 指令与其他指令的判别代码），命令码？（体现 IO 设备的具体操作），设备码？（多台 IO 设备的选择码））字长？（和其他机器指令字长相等）

#### 命令码分为哪几种情况？（数据从 io 设备输入主机，数据从主机输出至 io 设备，状态测试，形成某些操作指令）p158

#### 通道指令？（通道控制字）存在哪？

#### 通道指令与 I/O 指令的区别?

#### 一个通道可以和（一个以上）的设备控制器相连，一个设备控制器可控制（若干台）同一类型的设备器

#### IO 设备与主机的联系方式有哪些？

#### \1. IO 设备的编址方式（统一编址（I/O 地址看做存储器地址一部分，访 I/O 设备指令和访存指令相似），不统一编址（专用的 I/O 指令））。优缺点？当设备通过接口与主机连接时，cpu 可以通过接口地址访问 io 设备。p159

#### \2. 设备寻址

#### \3. 传送方式（并行传送，串行传送 优缺点？ 适用？）

#### \4. 联络方式（立即响应方式，异步并行“应答”联络方式（，串行传送的异步联络方式），同步时标联络）

#### \5. I/O 设备与主机的连接方式（辐射式（每台 IO 设备都有一套控制线路和一组信号线）和总线式）

#### IO 设备与主机信息传送的控制方式（程序查询方式，程序中断方式，直接存储器存取方式，IO 通道方式，IO 处理机方式）

#### 程序查询方式？IO 接口内设置一个能反映 IO 设备是否准备就绪的状态标记。流程？缺点？（踏步，串行工作，cpu 效率不高）

#### 程序中断方式？流程？代价？优缺点？

#### DMA 方式（存取周期级的）？（数据通路，优先级（窃取或挪用，窃取周期或挪用周期））

#### 接口？接口的作用？

#### 端口（接口电路中的一些寄存器。存放数据信息，控制信息，状态信息。成为数据段口，控制端口，状态端口）？+相应控制电路=接口。

#### IO 总线包括（数据线（通常是双向的，也可单向）？，设备选择线？，命令线？，状态线（单向）？）

#### 现代计算机中大多采用三台逻辑电路来构成总线。

#### 接口的功能和组成（选址功能（设备选中信号 SEL），传送命令（命令寄存器，命令译码器），传送数据（数据通路（具有缓冲能力），数据缓冲寄存器（每个 IO 接口中..的位数可以各不相同）），反映 IO 设备工作状态（完成触发器 D，工作触发器 B，中断请求触发器 INTR，屏蔽触发器 MASK））p188

#### 接口类型（按数据传输方式：并行接口，串行接口（还需串并转换装置））（按功能选择的灵活性：可编程接口，不可编程接口）(按通用性：通用接口，专用接口)（数据传送的控制方式：程序型接口（用于连接速度较慢的 IO 设备），DMA 型接口（用于连接高速设备））

#### 程序查询方式？核心问题？通常执行三条指令（测试指令，传送指令，转移指令）。

#### 程序查询方式的程序流程，（（准备工作 1 2 2）1 将寄存器中原内容保存起来 2 设置计数值，欲传送数据在主存缓冲区的首地址 4 启动 IO 设备 5 取设备状态标志测试是否准备就绪 6cpu 执行 IO 指令（读或写，复位状态标志位）7 修改主存地址 8 修改计数值 9 判断计数值 10 结束 IO 传送）

#### 程序查询方式的接口电路（图 p191）以输入设备为例工作流程（12345678）

#### 引入中断技术的原因？（适应 IO 设备工作速度低，提高计算机的整机效率，应对突发事件，为了实时控制的需要）

#### 相关硬件电路（1 中断请求触发器和中断屏蔽触发器 2 排队器（硬件方法（在 cpu 内部设置一个统一的排队器，也可在接口内分别设置各个设备的排队器（链式排队器）），软件方法（软件判优？优缺点？）） 3 中断向量地址形成部件（设备编码器）4 程序中断方式接口电路的基本组成（图 p196））

#### 向量地址的两种情况（1 是中断服务程序的入口地址，2 是中断向量表的指针，是入口地址的地址）

#### 向量中断？（一种识别中断源的技术或方式）中断向量？（入口地址和状态字）

#### 有些计算机产生的向量地址（是一个位移量。这个位移量加上某些寄存器存放的基地址得到入口地址）

#### CPU 响应 IO 设备提出中断请求的条件？（允许中断触发器 EINT 置 1（可用开中断指令置位，可用关中断指令或硬件自动使其复位）

#### CPU 响应中断的时间（每条指令执行阶段的结束时刻）

#### IO 终端处理过程（以输入设备为例 12345678910）可概括为(中断请求，中断判优，中断响应，中断服务，中断返回)p198

#### 中断服务程序的流程（保护现场，终端服务，回复现场，中断返回）

#### 保护现场（保存程序的断点（由中断隐指令完成），保存通用寄存器和状态寄存器的内容（由重点服务程序完成））（软或硬件实现？优缺点？）

#### 中断嵌套（多重中断）？单重中断？”区别？（在于开中断的设置时间不同）开关重点的时机（单冲开在中断返回之前，多重开在保护现场之后）？图 p199

#### 程序中断的优点和不足？

#### DMA 与主存交换数据时采用的三种方法？（1 停止 cpu 访问主存。优缺点？使用小容量存储器...）（2 周期挪用（周期窃取）（会遇到三种情况： 1 cpu 不需要访问主存。2 IO 设备请求 DMA 传送时，cpu 正在访问主存。3 IO 设备要求访问主存时，cpu 也要求访问主存（访问冲突））。没挪动一个主存周期都需要（申请总线控制权，占用总线控制权，归还总线控制权）。适用？ ）（3 DMA 与 cpu 交替访问。适用？总线使用权由 C1C2 控制的。优缺点？）

#### DMA 接口的功能（1 向 cpu 申请 DMA 传送。2 处理总线控制权转交。3 管理系统总线，控制数据传送。4 确定起始地址和数据长度，修正数据地址和数据长度。5 数据块传送结束时，给出 DMA 操作完成的信号）

#### DMA 接口的基本组成（主存地址寄存器 AR，字计数器 WC，数据缓冲寄存器 BR，DMA 控制逻辑，中断机构，设备地址寄存器 DAR）

#### DMA 控制逻辑（每当设备准备好一个数据字，就向 DMA 接口提出申请 DREQ，DMA 控制逻辑向 CPU 请求 DMA 服务，发出总线使用权控制信号 HRQ，待收到相应信号 HLDA 后，DMA 控制逻辑开始负责管理 DMA 传送全过程，包括 AR WC 的修改，识别总线地址，指定传送类型，通知设备已被赋予一个 DMA 周期 DACK 等）

#### 中断机构（与 IO 终端技术相同，但 IO 中断为了数据的输入或输出，这里报告一批数据传送结束）

#### DMA 的传送过程

#### DMA 的数据传送过程（预处理，数据传送，后处理）

#### 预处理（通知 DMA 控制逻辑传送方向，将设备地址送入设备地址寄存器，将主存起始地址送入主存地址寄存器，将传送字数赋给字计数器 ）

#### DMA 方式是以（块）为单位传送的。

#### 以周期挪用的 DMA 方式为例，数据输入为例子（12345678910），输出数据为例（12345678910）

#### 后处理？cpu 做一些 DMA 的结束工作（校验数据是否正确，决定是否继续用 DMA 传送其他数据块 若继续...若不...，测试传送过程中是否发生错误，若出错...）

#### DMA 借口与系统的连接方式？（链式查询方式，独立的 DMA 请求方式）

#### 与程序中断相比 DMA 方式有如下特点（数据传送？响应时间？处理异常状况？中断请求？优先级？）

#### DMA 接口的类型（选择型 DMA 接口？，多路型 DMA 接口？）可以多个设备同时工作吗？适用？区别？

#### 字节交叉？

#### 字节多路通道？选择通道？数组多路通道？（适用设备，设备的特点？传输数据宽度？可同时为几个设备服务？设备可同时工作？数组多路通道优点？）

#### 字节多路通道和数组多路通道的区别？

#### 链式多路型 DMA 接口，独立请求多路型 DMA 接口？
